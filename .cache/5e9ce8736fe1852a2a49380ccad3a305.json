{"dependencies":[{"name":"moment","loc":{"line":3,"column":23}},{"name":"echarts","loc":{"line":4,"column":24}},{"name":"./services/coinbase","loc":{"line":6,"column":25}}],"generated":{"js":"/* global Mavo */\n// const v = require('voca')\nconst moment = require('moment')\nconst echarts = require('echarts')\n\nconst coinbase = require('./services/coinbase')\n\nconst $ = s => document.querySelector(s)\n\nconst initHTMLFields = (base, currency, basesRef, currenciesRef) => {\n  const currencies = $('select[property=\\'currency\\']')\n  const bases = $('select[property=\\'base\\']')\n\n  basesRef.forEach(elt => {\n    const opt1 = document.createElement('option')\n    opt1.text = elt\n    opt1.value = elt\n    bases.add(opt1)\n  })\n\n  currenciesRef.forEach(elt => {\n    const opt2 = document.createElement('option')\n    opt2.text = elt\n    opt2.value = elt\n    currencies.add(opt2)\n  })\n\n  currencies.value = currency\n  bases.value = base\n}\n\nconst drawChart = (base, currency) => {\n  const myChart = echarts.init($('#myChart'))\n  console.log(myChart)\n\n  const option = {\n    title: {\n      text: 'ECharts entry example'\n    },\n    tooltip: {},\n    legend: {\n      data: ['Sales']\n    },\n    xAxis: {\n      data: ['shirt', 'cardign', 'chiffon shirt', 'pants', 'heels', 'socks']\n    },\n    yAxis: {},\n    series: [{\n      name: 'Sales',\n      type: 'bar',\n      data: [5, 20, 36, 10, 10, 20]\n    }]\n  }\n\n  myChart.setOption(option)\n}\n\nconst lookupSpot = () => {\n  const selCurrency = $('select[property=\\'currency\\']').value\n  const selBase = $('select[property=\\'base\\']').value\n\n  coinbase.spot(selCurrency).then(res => {\n    const price = res.find(elt => elt.base === selBase).amount\n    console.log(price)\n    $('input[property=\\'spot\\']').value = price\n\n    $('input[property=\\'checked_time\\']').value = moment().format('H:mm:ss')\n    $('input[property=\\'checked_date\\']').value = moment().format('MM/DD/YYYY')\n  })\n}\n\nMavo.Functions.onchange = (base, currency) => {\n  if (base || currency) {\n    console.log('--changing')\n    lookupSpot()\n    drawChart(base, currency)\n  }\n  return `${base} ${currency}`\n}\n\ncoinbase.historic().then(res => console.log(res))\n\ninitHTMLFields('BTC', 'EUR', ['BTC', 'ETH', 'LTC'], ['EUR', 'USD'])\n\ndrawChart('BTC', 'EUR')\n"},"hash":"1736fae857ce55d7e5cabfbb5bf338ca"}